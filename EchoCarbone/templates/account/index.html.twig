{% extends 'base.html.twig' %}

{% block title %}Liste des utilisateurs{% endblock %}

{% block body %}

    <div class="container bodycontent">
        <h1 class="my-5 text-center">Liste des utilisateurs</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Firstname</th>
                    <th>Lastname</th>
                    <th>Email</th>
                    <th>RÃ´le</th>
                    <th>Image</th>
                    <th>Pseudo</th>

                    {% if is_granted('ROLE_ADMIN') %}
                        <th>Actions</th>
                    {% endif %}

                </tr>
            </thead>
            <tbody>
            {% for admin in admins %}
                <tr>
                    <td>{{ admin.id }}</td>
                    <td>{{ admin.firstname }}</td>
                    <td>{{ admin.lastname }}</td>
                    <td>{{ admin.email }}</td>
                    <td>
                        {% for roles in admin.roles %}
                            <p>{{roles}}</p>
                        {% endfor %}
                    </td>
                    <td><img src="{{ admin.image }}" alt="avatar {{ admin.pseudo }}"></td>
                    <td>{{ admin.pseudo }}</td>

                    {% if is_granted('ROLE_ADMIN') %}
                        <td>
                            <a href="{{ path('account_profil' , {'slug': admin.slug } ) }}" class="btn btn-sm btn-primary">
                                <i class="fas fa-eye"></i>
                            </a>
                            <form class="d-inline" action="{{ path('account_delete' , {'slug': admin.slug } ) }}" onsubmit="return confirm('Etes vous sur de vouloir supprimer cette utilisateur ?');">
                                <button class="btn btn-sm btn-danger">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    {% endif %}


                </tr>
            {% else %}
                <tr>
                    <td colspan="10">Aucun utilisateur</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{#    <a href="{{ path('admin_new') }}">Create new</a>#}
{% endblock %}

